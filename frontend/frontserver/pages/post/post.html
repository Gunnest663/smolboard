<div class="post">
	{{ template "nav" . }}

	<div class="content">
		{{ with .Post }}

		<aside>
			<form>
				<legend>Tags</legend>
				{{/* This has to be first for the tag input to work */}}
				<input type="submit" style="display: none"
					   name="submit"
					   formaction="/posts/{{.ID}}/tag" formmethod="post" />

				{{ range .Tags }}
				<input type="submit" class="tag"
					   formaction="/posts"
					   name="q" value="{{ .TagName }}" />
				{{ end }}

				{{ if $.CanChangePost }}
				<input type="text" class="add"
					   name="tag" placeholder="Add a tag..."
					   formaction="/posts/{{.ID}}/tag" formmethod="post" />
				{{ end }}
			</form>

			<div class="post-info">
				<legend>Post</legend>

				<!-- <div class="post-link"> -->
				<!-- 	<label for="post-link">Post Link</label> -->
				<!-- 	<input type="text" id="post-link" value=""> -->
				<!-- </div> -->

				<!-- <div class="direct-link"> -->

				<!-- </div> -->
			</div>
		</aside>

		<main>
			{{ with .Post }}

			{{ if (isImage .ContentType) }}
			<img alt="Image" {{ $.ImageSizeAttr . }}
				 src="{{ $.Session.PostDirectURL . }}"
				 style="background-image: url('{{ $.Session.PostThumbURL . }}')">

			{{ else if (isVideo .ContentType) }}
			<video preload="all" controls src="{{ $.Session.PostDirectURL . }}#t=0.1" />

			{{ else }}
			<div>
				<p><span class=".icon-link"></span></p>
				<p>{{ .ContentType }}</p>
			</div>

			{{ end }}

			{{ end }}
		</main>

		{{ end }}
	</div>
</div>

{{ template "footer" }}
